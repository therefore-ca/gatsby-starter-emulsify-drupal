{"version":3,"sources":["webpack:///../theme-emulsify/src/components/Templates/IsolatedTwigComponent.js"],"names":["IsolatedTwigComponent","assetReference","addJs","jsCode","_this","props","data","sitePage","fields","id","assetCode","document","querySelector","remove","s","createElement","type","async","innerHTML","body","appendChild","addCss","cssCode","componentDidMount","_this$props$data$site","this","componentDidUpdate","_this$props$data$site2","render","componentHtml","react__WEBPACK_IMPORTED_MODULE_0___default","a","dangerouslySetInnerHTML","__html","React","Component","pageQuery"],"mappings":"uMAOqBA,8JACnBC,eAAiB,UAEjBC,MAAQ,WAAM,IAIIC,EAGZC,EAAKC,MALPC,KACEC,SACEC,OAAUL,OAIVM,EAAQL,EAAKH,eAAX,KACFS,EAAYC,SAASC,cAAT,IAA2BH,GACzCC,GACFA,EAAUG,SAEZ,IAAMC,EAAIH,SAASI,cAAc,UACjCD,EAAEE,KAAO,kBACTF,EAAEG,OAAQ,EACVH,EAAEL,GAAKA,EACPK,EAAEI,UAAYf,EACdQ,SAASQ,KAAKC,YAAYN,MAG5BO,OAAS,WAAM,IAIGC,EAGZlB,EAAKC,MALPC,KACEC,SACEC,OAAUc,QAIVb,EAAQL,EAAKH,eAAX,MACFS,EAAYC,SAASC,cAAT,IAA2BH,GACzCC,GACFA,EAAUG,SAEZ,IAAMC,EAAIH,SAASI,cAAc,SACjCD,EAAEE,KAAO,WACTF,EAAEL,GAAKA,EACPK,EAAEI,UAAYI,EACdX,SAASQ,KAAKC,YAAYN,wHAG5BS,kBAAA,WAAoB,IAAAC,EAOdC,KAAKpB,MALPC,KACEC,SACEC,OAAUL,EAJEqB,EAIFrB,OAAQmB,EAJNE,EAIMF,QAIpBnB,GACFsB,KAAKvB,QAEHoB,GACFG,KAAKJ,YAGTK,mBAAA,WAAqB,IAAAC,EAOfF,KAAKpB,MALPC,KACEC,SACEC,OAAUL,EAJGwB,EAIHxB,OAAQmB,EAJLK,EAIKL,QAIpBnB,GACFsB,KAAKvB,QAEHoB,GACFG,KAAKJ,YAITO,OAAA,WAAS,IAISC,EAGZJ,KAAKpB,MALPC,KACEC,SACEC,OAAUqB,cAIhB,OAAOC,EAAAC,EAAAhB,cAAA,OAAKiB,wBAAyB,CAAEC,OAAQJ,SAnFAK,IAAMC,WAuF5CC,EAAS","file":"component---theme-emulsify-src-components-templates-isolated-twig-component-js-7b71f0549abe7a8bbfd2.js","sourcesContent":["import React from \"react\";\nimport { graphql } from \"gatsby\";\n\n/**\n * This page template is used for rendering a twig component in isolation.\n * An iframe is used to ensure the component and the style guide don't leak styles\n */\nexport default class IsolatedTwigComponent extends React.Component {\n  assetReference = \"asset\";\n\n  addJs = () => {\n    const {\n      data: {\n        sitePage: {\n          fields: { jsCode }\n        }\n      }\n    } = this.props;\n    const id = `${this.assetReference}Js`;\n    const assetCode = document.querySelector(`#${id}`);\n    if (assetCode) {\n      assetCode.remove();\n    }\n    const s = document.createElement(\"script\");\n    s.type = \"text/javascript\";\n    s.async = true;\n    s.id = id;\n    s.innerHTML = jsCode;\n    document.body.appendChild(s);\n  };\n\n  addCss = () => {\n    const {\n      data: {\n        sitePage: {\n          fields: { cssCode }\n        }\n      }\n    } = this.props;\n    const id = `${this.assetReference}Css`;\n    const assetCode = document.querySelector(`#${id}`);\n    if (assetCode) {\n      assetCode.remove();\n    }\n    const s = document.createElement(\"style\");\n    s.type = \"text/css\";\n    s.id = id;\n    s.innerHTML = cssCode;\n    document.body.appendChild(s);\n  };\n\n  componentDidMount() {\n    const {\n      data: {\n        sitePage: {\n          fields: { jsCode, cssCode }\n        }\n      }\n    } = this.props;\n    if (jsCode) {\n      this.addJs();\n    }\n    if (cssCode) {\n      this.addCss();\n    }\n  }\n  componentDidUpdate() {\n    const {\n      data: {\n        sitePage: {\n          fields: { jsCode, cssCode }\n        }\n      }\n    } = this.props;\n    if (jsCode) {\n      this.addJs();\n    }\n    if (cssCode) {\n      this.addCss();\n    }\n  }\n\n  render() {\n    const {\n      data: {\n        sitePage: {\n          fields: { componentHtml }\n        }\n      }\n    } = this.props;\n    return <div dangerouslySetInnerHTML={{ __html: componentHtml }} />;\n  }\n}\n\nexport const pageQuery = graphql`\n  query IsolatedTwigComponentQuery($relativePath: String) {\n    sitePage(context: { relativePath: { eq: $relativePath } }) {\n      fields {\n        componentHtml\n        jsCode\n        cssCode\n      }\n    }\n  }\n`;\n"],"sourceRoot":""}